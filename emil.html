<div id="ingredienser">
    <div id="ingrediens" data-duplicate="ingrediens" data-duplicate-min="1">
        <div class="form-group">
            <div class="col-sm-1 col-sm-offset-2">

                <input type="text" class="form-control" name="quantity[]" placeholder="M&auml;ngd" required>

            </div>

            <div class="col-sm-4">
                <div class="input-group tag">

                    <input class="typeahead form-control" name="ingrediensid[]" type="text" placeholder="Ingrediens" autocomplete="off" spellcheck="false" dir="auto" required>
                     <!-- This is a typehead class in that js-->
                    <input class="typeahead form-control" type="text" disabled="" autocomplete="off" spellcheck="false" style="visibility: hidden; ">

                    <pre aria-hidden="true" style="position: absolute; visibility: hidden; white-space: nowrap; font-size: 24px; font-style: normal; font-variant: normal; font-weight: 400; word-spacing: 0px; letter-spacing: 0px; text-indent: 0px; text-rendering: auto; text-transform: none;"></pre>

                    <span class="tt-dropdown-menu" style="position: absolute; top: 100%; left: 0px; z-index: 100; display: none;">
                        <div class="tt-dataset-tag"></div>
                    </span>

                </div>
            </div>

            <div class="col-sm-2">
                <button class="btn btn-info" id='my_clone_button' onclick="duplicerareN()">+</button>
                <!--button data-duplicate-add="ingrediens" class="btn btn-info" type="button">+</button>
                <button data-duplicate-remove="ingrediens" class="btn btn-danger" type="button">-</button-->
            </div>

        </div>
    </div>
</div>


<script>
    function bh()
    {
        var numbers;
        var tag = new Bloodhound({
            datumTokenizer: function(d) { return Bloodhound.tokenizers.whitespace(d.name); },
            queryTokenizer: Bloodhound.tokenizers.whitespace,
            limit: 10,
            local: [<?
                    $tags = MySQL_GetArray("SELECT id,namn FROM omnom.ingrediens;" );
                    $tagstring = null;
                    foreach ($tags["result"] as $key => $value)
                    {
                        $tagstring = $tagstring."{ name: '".$value["namn"]."' }, ";
                    }
                    echo substr($tagstring, 0, -2);
                    ?>]
        });
    
        tag.initialize();
        
        $('.tag .typeahead').typeahead(null, {
          displayKey: 'name',
          source: tag.ttAdapter()
        });
    }

    $(document).ready(bh());
    
    function duplicerareN()
    {
        var itm = document.getElementById("ingrediens");
        var cln = itm.cloneNode(true);
        document.getElementById("ingredienser").appendChild(cln);
        
        $('.tag .typeahead').typeahead('destroy');
        bh();
        
    };

</script>